function OmitterDom(c,b,a){this.dom=c;this.domContent=c.innerText;this.cramp=null;this.crampContent=a;this.maxTop=null;this.maxHeight=null;this.count=b;this.init()}OmitterDom.prototype.init1=function(){var a=this.dom.childNodes.length-1;while(-1<a){this.dom.removeChild(this.dom.childNodes[a]);a=(a-1)|0}};OmitterDom.prototype.init2=function(){var h=document.createElement("div");h.classList.add("omitter");var d=document.createElement("div");var c=document.createDocumentFragment();var e=0;var f=this.domContent.length;while(e<f){var b=document.createElement("span");var g=document.createTextNode(this.domContent[e]);b.appendChild(g);b.classList.add("omitter-charactor");c.appendChild(b);e=(e+1)|0}if(this.crampContent&&this.crampContent.length){var j=document.createElement("span");var a=document.createTextNode(this.crampContent);j.appendChild(a);j.classList.add("omitter-cramp");h.appendChild(j);this.cramp=j}d.appendChild(c);this.charactors=d;h.appendChild(d);this.dom.appendChild(h);this.root=h};OmitterDom.prototype.init=function(){this.init1();this.init2()};OmitterDom.prototype.do1=function(){if(this.cramp.classList.contains("omitter-hidden")){this.cramp.classList.remove("omitter-hidden")}};OmitterDom.prototype.do2=function(){var c=new Array();var a=0;var b=this.charactors.childNodes.length;while(a<b){var d=this.charactors.childNodes[a].offsetTop;if(c.indexOf(d)==-1){c.push(d)}a=(a+1)|0}this.maxTop=c.length==0?0:c[Math.min(c.length-1,this.count)]};OmitterDom.prototype.do3=function(){this.maxHeight=0;var a=this.charactors.childNodes.length-1;while(-1<a){if(this.charactors.childNodes[a].offsetTop==this.maxTop){this.maxHeight=Math.max(this.maxHeight,this.charactors.childNodes[a].offsetHeight)}a=(a-1)|0}};OmitterDom.prototype.do4=function(){var a=false;var b=this.charactors.childNodes.length-1;while(-1<b){if(this.maxTop<this.charactors.childNodes[b].offsetTop){this.charactors.childNodes[b].classList.add("omitter-hidden")}else{if(this.maxTop==this.charactors.childNodes[b].offsetTop){if(this.cramp.offsetWidth<this.charactors.offsetWidth-this.charactors.childNodes[b].offsetLeft){if(!a){a=true;this.cramp.style.top=this.charactors.childNodes[b].offsetTop+"px";this.cramp.style.left=this.charactors.childNodes[b].offsetLeft+"px";this.charactors.childNodes[b].classList.add("omitter-hidden")}else{this.charactors.childNodes[b].classList.remove("omitter-hidden")}}else{this.charactors.childNodes[b].classList.add("omitter-hidden")}}else{this.charactors.childNodes[b].classList.remove("omitter-hidden")}}b=(b-1)|0}this.root.style.maxHeight=(this.maxTop+this.maxHeight).toString()+"px"};OmitterDom.prototype.omit=function(){this.do1();this.do2();this.do3();this.do4()};OmitterDom.prototype.unomit1=function(){if(this.cramp.classList.contains("omitter-hidden")==false){this.cramp.classList.add("omitter-hidden")}};OmitterDom.prototype.unomit2=function(){var a=this.charactors.childNodes.length-1;while(-1<a){this.charactors.childNodes[a].classList.remove("omitter-hidden");a=(a-1)|0}};OmitterDom.prototype.unomit3=function(){this.root.style.maxHeight=null};OmitterDom.prototype.unomit=function(){this.unomit1();this.unomit2();this.unomit3()};function Omitter(c,b,a){this.status=false;if(window.jQuery&&c instanceof window.jQuery){c=c.toArray()}this.doms=Array.prototype.slice.call(c).map(function(d){return new OmitterDom(d,b,a)})}Omitter.prototype.omit=function(){this.status=true;this.doms.map(function(a){a.do1()});this.doms.map(function(a){a.do2()});this.doms.map(function(a){a.do3()});this.doms.map(function(a){a.do4()})};Omitter.prototype.unomit=function(){this.status&&this.doms.map(function(a){a.unomit()});this.status=false};Omitter.prototype.toggle=function(){this.status?this.unomit():this.omit()};Omitter.prototype.update=function(){this.status?this.omit():this.unomit()};